<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Guía de la API</h1>

    <h2>POST /api/user/register</h2>
    <h3>Función</h3>
    <p>Registra un usuario en el servidor</p>
    <h3>Cuerpo del mensaje</h3>
    <p>Se debe enviar un JSON en el cuerpo del mensaje con la siguiente estructura </p>
    <pre>
        {
            "name": "XX",
            "username": "XX",
            "mail": "XX",
            "pass": "XX",
            "city": "XX",
            "phone": "XX",
            "club": "XX",
            "rol": "XX"     // Puede ser: user, organizer o admin
        }
    </pre>
    <h3>Devuelve</h3>
    <p>Devuelve los siguientes códigos de error:</p>
    <ul>
        <li><b>200</b>: El usuario se ha registrado correctamente</li>
        <li>
            <b>400</b>: hay un error en los datos enviados. Los posibles errores son:
            <ul>
                <li>Falta un campo obligatorio (name, username, mail o pass)</li>
                <li>El nombre de usuario ya existe</li>
                <li>El correo electrónico ya está registrado</li>
                <li>El rol no es válido</li>
            </ul>
        
        </li>
    </ul>

    <hr>

    <h2>POST /api/user/check</h2>
    <h3>Función</h3>
    <p>Comprueba si el nombre de usuario ya está siendo utilizado por otro usuario</p>
    <h3>Cuerpo del mensaje</h3>
    <p>Se debe enviar un JSON en el cuerpo del mensaje con la siguiente estructura </p>
    <pre>
        {"username": "XX"}
    </pre>
    <h3>Devuelve</h3>
    <p>Puede devolver los siguientes códigos de estado</p>
    <ul>
        <li><b>200</b>: El nombre de usuario está disponible</li>
        <li><b>409</b>: El nombre de usuario ya está siendo utilizado</li>
    </ul>

    <hr>

    <h2>GET /api/user/username/<i>:username</i></h2>
    <h3>Función</h3>
    <p>Extrae de la base de datos los datos del usuario cuyo nombre de usuario se haya indicado</p>
    <h3>Devuelve</h3>
    <p>Puede devolver los siguientes códigos de estado:</p>
    <ul>
        <li><b>200</b>: El usuario existe. Devuelve sus datos en un JSON</li>
        <li><b>404</b>: El nombre de usuario no existe</li>
        <li><b>401</b>: No se han enviado credenciales de autenticación (JWT) <b>(pendiente de implementar)</b></li>
        <li><b>403</b>: El JWT enviado no tiene privilegios suficientes para acceder a los datos <b>(pendiente de implementar)</b></li>
    </ul>

    <hr>

    <h2>POST /api/login</h2>
    <h3>Función</h3>
    <p>Se le envía en el cuerpo del mensaje un JSON con los campos username y pass, y comprueba que existe ese usuario en la base de datos y la contraseña es correcta</p>
    <h3>Cuerpo del mensaje</h3>
    <p>Se debe enviar un JSON en el cuerpo del mensaje con la siguiente estructura </p>
    <pre>
        {
            "username": "XX",
            "pass": "XX"
        }
    </pre>
    <h3>Devuelve</h3>
    <p>Puede devolver los siguientes códigos de estado:</p>
    <ul>
        <li><b>401</b>: las credenciales no son válidas</li>
        <li><b>200</b>: las credenciales son correctas. En el cuerpo del mensaje devuelve el token JWT</li>
    </ul>


</body>
</html>